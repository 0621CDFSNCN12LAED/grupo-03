<!DOCTYPE html>
<html lang="en">
<head>
    <%- include("../partials/head.ejs") %>
    <link rel="stylesheet" href="/css/styles-productForm.css">
    <script defer src="/js/productForm.js"></script>
</head>
<body>
    <header>
        <%- include("../partials/header.ejs") %>
    </header>
    <main>
        <section>            
            <div class="container">
                <form action="/products/<%= product.id %>?_method=PUT" class="formulario" method="POST" enctype="multipart/form-data">
                    <div class="title">Editar Producto</div>
                    <br>
                    <div class="product-details">
                        <div class="input-box">
                            <label for="name">Nombre</label>
                            <input type="text" name="name" id="name" value="<%= product.name %>" >
                        </div>
                        <br>
                        <div class="input-box">
                            <label for="description">Descripcion</label>
                            <input type="text" name="description" id="description" value="<%= product.description %>" >
                        </div>
                        <br>
                        <div class="input-box">
                            <label for="image">Imagen</label>
                            <input type="file" name="image" id="image" class="input-img" accept="image/*">
                        </div>
                        <br>
                        <div class="input-box">
                            <label for="category">Categoria</label>
                            <select name="productCategoryId">
                                <% for( category of categories ) { %>
                                    <% if (category.id == product.productCategoryId) { %> 
                                        <option value="<%= category.id %>" selected><%= category.name %></option>
                                    <% } else { %>
                                        <option value="<%= category.id %>"><%= category.name %></option>
                                    <% } %> 
                                <% } %> 
                            </select> 
                        </div>
                        <br>
                        <div class="input-box">
                            <label for="weight">Peso</label>
                            <input type="text" name="weight" id="weight" value=<%= product.weight %>>
                        </div>
                        <br>
                        <div class="input-box">
                            <label for="price">Precio</label>
                            <input type="text" name="price" id="price" value=<%= product.price %>>
                        </div>
                    </div>
                    <br>
                    <div class="button-container">
                        <div class="button">
                            <input type="submit" value="Guardar">
                        </div>
                    </div>
                </form>
            </div>
        </section>
        <div class="validation-errors">
            <div class="frontend-validations">
                <p class="error-title" id="error-title"></p>
                <ul class="errors" id="errors"></ul>
            </div>
            <div class="backend-validations">
                <% if (locals.errors) { %> 
                    <p style = "color:red">ERROR</p>
                    <ul>
                        <% for (let error of errors) { %> 
                            <li style = "color:red"><%= error.msg %></li>
                        <% } %> 
                    </ul>
                <% } %> 
            </div>
        </div>
    </main>
    <footer>
        <%- include("../partials/footer.ejs") %>
    </footer>
</body>
</html>